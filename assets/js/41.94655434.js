(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{523:function(_,v,i){"use strict";i.r(v);var l=i(2),t=Object(l.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h2",{attrs:{id:"ieee-754-计算步骤"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ieee-754-计算步骤"}},[_._v("#")]),_._v(" IEEE 754 计算步骤")]),_._v(" "),v("ol",[v("li",[_._v("指数对阶\n"),v("ol",[v("li",[_._v("小阶对大阶，会右移，容易丢失位数")]),_._v(" "),v("li",[_._v("相加或相减，值可以溢出")])])]),_._v(" "),v("li",[_._v("尾数运算\n"),v("ol",[v("li",[_._v("尾数运算就是在完成对阶以后进行尾数相加减")])])]),_._v(" "),v("li",[_._v("结果规格化\n"),v("ol",[v("li",[_._v("左移规格化，右移可能精度丢失")])])]),_._v(" "),v("li",[_._v("舍入处理\n"),v("ol",[v("li",[_._v("四舍五入，1 入 0 舍（默认）")]),_._v(" "),v("li",[_._v("朝正无穷方向舍入")]),_._v(" "),v("li",[_._v("朝负无穷方向舍入")]),_._v(" "),v("li",[_._v("朝 0 方向舍入")])])]),_._v(" "),v("li",[_._v("溢出检查\n"),v("ol",[v("li",[_._v("运算结果的阶码的值判断是否溢出")]),_._v(" "),v("li",[_._v("超过最大正数（上溢）：浮点数正数是正上溢，否则是负上溢")])])])]),_._v(" "),v("h2",{attrs:{id:"双精度-64-举例"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#双精度-64-举例"}},[_._v("#")]),_._v(" 双精度 64 举例")]),_._v(" "),v("ol",[v("li",[_._v("符号位（1 位）+ 指数位（11 位）+ 尾数（52 位）")]),_._v(" "),v("li",[_._v("符号位中，1 表示负数，0 表示正数")]),_._v(" "),v("li",[_._v("指数位中，指数 = 指数 + 1023（偏移码）")]),_._v(" "),v("li",[_._v("尾数中，默认存储 1 后面部分，小数部分")])]),_._v(" "),v("h2",{attrs:{id:"_0-1-0-2-0-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_0-1-0-2-0-3"}},[_._v("#")]),_._v(" 0.1 + 0.2 !== 0.3")]),_._v(" "),v("ol",[v("li",[v("p",[_._v("js 采用的是 IEEE 754 标准，其中有俩个标准一种是 64 位双精度浮点数，一种是 32 为单精度浮点数\n这俩种标准主要的区别在于数的范围的大小")])]),_._v(" "),v("li",[v("p",[_._v("32 位的尾数一共 23 个字符。最多表示 23 个 1 也就是数字 2^23(8388608)。当值大于这个数的时候就会超过 23 位\n因此就没法计算了。（64 位也是相同的道理）")])]),_._v(" "),v("li",[v("p",[_._v("在计算的时候并不是先将 10 进制数计算完成在存储为 2 进制。而是会先将 10 进制转换为二进制在计算")])]),_._v(" "),v("li",[v("p",[_._v("0.1 或 0.2 在转换二进制数时是个无限循环小数，会出现小数丢失情况，所以 0.1 + 0.2 !== 0.3")])]),_._v(" "),v("li",[v("p",[_._v("原因：存储、运算、显示")]),_._v(" "),v("ol",[v("li",[_._v("存储：十进制数字转二进制可能是无限循环的，所以存不下，会进行舍去或加，比如 0.2 转二进制实际上是比 0.2 大的，而 0.3 转二进制是比 0.3 小的")]),_._v(" "),v("li",[_._v("运算：会把上述问题的存储问题放大或修复，比如 0.2 + 0.3 = 0.5，刚好一个偏大一个偏小正好修复了，再比如 0.3 - 0.2 !== 0.1，这个就放大了")]),_._v(" "),v("li",[_._v("显示：做了近似处理，比如 0.3 存储的二进制是偏小的，但是在控制输入 0.3 时是显示 0.3，而不是 0.299999999...，但是你如果使用 0.3 === 2.99999，就是 true，可以使用 0.3.toPrecision(30) 获取二进制的值")])])]),_._v(" "),v("li",[v("p",[_._v("基于以上的问题，toFixed() 这个函数也有问题")]),_._v(" "),v("ol",[v("li",[_._v("比如 1.45.toFixed(1) === '1.4' 和 2.45.toFixed(1) === '2.5'\n还是因为存储精度截取问题，如果最后一位的二进制是 1 则得到的二进制就会进 1 导致偏大，如果是 0 则会舍去导致偏小")])])])]),_._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"title"}),v("p",[_._v("作者：chenjie "),v("br"),_._v("\n链接：https://webchenjie.cn "),v("br"),_._v("\n来源：ChenJieBlog")])])])}),[],!1,null,null,null);v.default=t.exports}}]);