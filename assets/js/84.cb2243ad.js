(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{568:function(s,t,n){"use strict";n.r(t);var a=n(2),e=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// linux常用命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" ssh root@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".100")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".20")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 登录系统，免密登录需要和 git 一样配置 ssh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" ls "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查看当前文件夹下的文件和文件夹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v(" ls "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查看当前文件夹下的文件和文件夹,包括以.开头的文件和隐藏文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.")]),s._v(" ll "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 和2一样,显示不同,一个平铺,一个列表,功能一样")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.")]),s._v(" clear "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 清屏")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.")]),s._v(" mkdir a "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建一个a的文件夹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.")]),s._v(" rm "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("rf a "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除a文件夹,-r是递归删除,-f是强制删除")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.")]),s._v(" cd dist "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 切换到dist目录中去")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.")]),s._v(" mv index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html index1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 把index.html改名变成index1.html")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.")]),s._v(" mv a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 把a.js移动到上一级")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.")]),s._v(" cp a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js a1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 把a.js拷贝成a1.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.")]),s._v(" rm a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除a.js文件,不用加-rf参数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.")]),s._v(" touch a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建a.js文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.")]),s._v(" vi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("vim a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 进入a.js编辑,不存在则会新建,输入i进行编辑,按esc退出编辑,按:w保存,按:q退出编辑器,按:q!强制退出")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15.")]),s._v(" cat a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查看a.js的内容,直接打印在控制台上")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16.")]),s._v(" head a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查看a.js的内容(前几行)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17.")]),s._v(" tail a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查看a.js的内容(后几行)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.")]),s._v(" grep "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"babel"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在package.json中查找babel关键字")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.")]),s._v(" lsb_release "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查看当前操作系统的版本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20.")]),s._v(" uname "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查看系统内核")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21.")]),s._v(" df "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Th "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查看文件系统磁盘占用情况，-Th 表示以 1G 为计量，不加则以 1k 为计量")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22.")]),s._v(" top "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查看运行的进程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23.")]),s._v(" echo "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 把 file 文件中的内容替换成 test")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.")]),s._v(" echo "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 追加 test 到 file 文件中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25.")]),s._v(" tar zxvf test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 解压，z 表示以 z 结尾，x 表示解压，v 表示显示解压的过程，f 表示解压后的文件名和压缩包一致")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("26.")]),s._v(" tar zcvf test1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz test "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 压缩，c 表示压缩，把 test 进行压缩，压缩后的文件叫 test1.tar.gz")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27.")]),s._v(" sudo 的全称为："),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("super")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" 顾名思义：干超级用户才能干的事！所以 sudo 最常用的功能就是提升一个命名的执行权限。\n    sudo yum install git\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28.")]),s._v(" yum install "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("y name "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 安装 name 包，自动回答 yes")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29.")]),s._v(" 下载安装：\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" apt"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v("：Debian及其衍生系统（如Ubuntu）的默认包管理器（系统自带）\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" yum：Red Hat系列Linux发行版（如CentOS、Fedora）的包管理器（系统自带）\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("curl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 用于从或向网络服务器传输数据，支持多种协议（如"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTTP")]),s._v("、"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTTPS")]),s._v("、"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FTP")]),s._v("等）（系统自带）\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("wget")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 专注于下载功能，支持递归下载整个网站或按需下载指定文件（需要安装）\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30.")]),s._v(" 远程操作，如果已建立信任，则无需密码\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" 远程拷贝 scp\n        scp "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json root@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".100")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".20")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("root"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dir "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 把 package.json 文件拷贝到云服务机子的 /root/test-dir 文件夹下面")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" 远程执行命令\n        ssh root@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".100")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".20")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cd /root/test-dir; touch a.txt"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 进入 root/test-dir 文件夹执行创建 a.txt 文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31.")]),s._v(" 防火墙：默认的云服务器的端口，外部是访问不到的\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" 需要在平台上的安全组中进行开放\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" 并且在系统中开启端口\n        ## 查看已开放端口\n        firewall"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cmd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("list"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ports\n\n        ## 开启指定端口\n        firewall"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cmd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("add"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("端口号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tcp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("permanent\n\n        ## 开启指定端口后必须重启防火墙\n        systemctl restart firewalld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v(" nginx 服务报错："),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("403")]),s._v(" Forbidden\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" 原因：文件权限不够，增加权限即可\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" 例如，我们 nginx 静态服务的目录是 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("root"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html ，执行如下命令\n\n        "),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("shell\n            ## 假如 nginx 静态服务的目录是 /root/test-server/html\n\n            chmod -R 777 /root\n            chmod -R 777 /root/test-server\n            chmod -R 777 /root/test-server/html\n\n            nginx -s reload  ## 重启 nginx\n        ")]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32.")]),s._v(" 通过 github actions 自动触发部署云服务器的代码\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" 整体思路：\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" 首先云服务器已经把代码拉取到了本地，这个可以直接通过 git clone 把代码拉下来\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" 通过 github actions 触发云服务器的命令执行\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 登录云服务器，并执行远程操作")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 注意：服务器已经进行了 git clone 动作，已经有了对应的代码目录")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" ssh root@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".100")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".20")]),s._v(' "\n                '),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" cd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("root"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myblog"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 切换到代码目录")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" git checkout "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 恢复本地代码")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v(" git checkout main "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 切换到主分支")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.")]),s._v(" git pull origin main "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 重新拉取代码")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 重启服务")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.")]),s._v(" npm install\n                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.")]),s._v(' npm run prd\n            "\n        '),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v(" 完成部署\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" 基于上面的思路，需要解决一个问题，就是怎么样在 github actions 中登录云服务器并且不需要输入密码？\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" 免密登录原理：本地生成 rsa 的私钥和公钥，在云服务器上配置公钥，这样就能实现免密登录，和 git 一样\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" 在 github actions 中生成 rsa，然后再把公钥上传到云服务器，理论上这样是可以的\n            但是 github actions 是一个临时的虚拟机，也就是说用完就会销毁，每次都需要生成然后上传\n            那这样就相当于每次都需要手动拷贝的过程，这步太麻烦！！！\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v(" 把本地电脑的 rsa 的公钥配置到云服务器上，把私钥通过 github secrets 配置进去\n            在 workflows 中进行获取，然后保存在 github actions 这个临时虚拟机的 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ssh"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("id_rsa 中\n            这样子就能够解决当前这个问题！！！\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.")]),s._v(" 关于 gihub secrets 配置的知识\n            每个 github 项目都可以在 Settings 下的 Security 下的 Secrets and variables 配置 Actions 用到的秘钥\n            在 workflows 中可以使用 $"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" secrets"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GH_TOKEN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" 进行获取，"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GH_TOKEN'")]),s._v(" 是配置时的名称\n            当然，配置的名称和内容都是自定义的，如果是要配置 github token 则是需要在 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://github.com/settings/tokens'")]),s._v("\n            这里生成，生成后自己要记住，不然没办法查看已生成的内容，只能更新，如果是要配置 npm token 则是在\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://www.npmjs.com/settings/webchenjie/tokens'")]),s._v(" 中生成，规则和 github 一样\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v(" 具体的 workflows 配置\n        "),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('shell\n            name: deploy # 名字而已\n\n            on:\n                push:\n                    branches:\n                        - main # 监听 main 分支的 push 事件，有触发就执行下面的任务\n\n            jobs:\n                deploy: # 名字而已\n                    runs-on: ubuntu-latest # 使用 ubuntu 系统\n                    steps:\n                        - name: Checkout\n                        uses: actions/checkout@v3 # 切换分支\n\n                        - name: set id_rsa # 获取配置的秘钥并保存在对应的目录中\n                        run: |\n                            mkdir -p ~/.ssh/ # 创建文件夹\n                            echo "{{ secrets.MY_ID_RSA }}" > ~/.ssh/id_rsa # 把秘钥写入文件中\n                            chmod 600 ~/.ssh/id_rsa # 设置权限\n                            ssh-keyscan 192.168.100.20 >> ~/.ssh/known_hosts # 把云服务器的IP追加到信任域名中\n\n                        - name: deploy # 部署\n                        run: |\n                            ssh root@192.168.100.20 "\n                                # 注意：服务器已经进行了 git clone 动作，已经有了对应的代码目录\n                                cd /root/myblog/my-server; # 切换到代码目录\n                                git checkout .; # 恢复本地代码\n                                git checkout main; # 切换到主分支\n                                git pull origin main; # 重新拉取代码\n\n                                # 重启服务\n                                npm install;\n                                npm run prd;\n                            "\n\n                        - name: delete id_rsa # 删除 id_rsa，避免泄漏，理论上不会\n                        run: rm -rf ~/.ssh/id_rsa\n        ')]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34.")]),s._v(" 关于数据库，包括 Mysql、Mongodb、Redis\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" 在开发环境下可以通过本地安装，或者使用公司提供的内网服务\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" 如果是线上则需要单独购买，各个云服务都有提供\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" 注意，不能直接在云服务器上自己安装数据库！！！\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" 数据库不仅是一个服务，更是一个完善的管理系统\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v(" 如数据的管理、备份；管理员的增删、权限；大项目读写分离等\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.")]),s._v(" 数据应该和服务分离，避免服务被攻击而导致数据受损\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35.")]),s._v(" 关于域名和 "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTTPS")]),s._v(" 证书\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" 域名需要购买，每年 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" 元左右\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" 域名需要备案，大约 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" 周时间（免费）\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" 以前的域名是可以单独进行备案的，不需要购买云服务器\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" 现在，域名需要指定某个云服务器"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v("，才能进行备案\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v(" 如果换了云服务器，此前的域名备案可能失效\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTTPS")]),s._v(" 证书需要购买，每年 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" 元左右（免费的不安全）\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br"),t("span",{staticClass:"line-number"},[s._v("93")]),t("br"),t("span",{staticClass:"line-number"},[s._v("94")]),t("br"),t("span",{staticClass:"line-number"},[s._v("95")]),t("br"),t("span",{staticClass:"line-number"},[s._v("96")]),t("br"),t("span",{staticClass:"line-number"},[s._v("97")]),t("br"),t("span",{staticClass:"line-number"},[s._v("98")]),t("br"),t("span",{staticClass:"line-number"},[s._v("99")]),t("br"),t("span",{staticClass:"line-number"},[s._v("100")]),t("br"),t("span",{staticClass:"line-number"},[s._v("101")]),t("br"),t("span",{staticClass:"line-number"},[s._v("102")]),t("br"),t("span",{staticClass:"line-number"},[s._v("103")]),t("br"),t("span",{staticClass:"line-number"},[s._v("104")]),t("br"),t("span",{staticClass:"line-number"},[s._v("105")]),t("br"),t("span",{staticClass:"line-number"},[s._v("106")]),t("br"),t("span",{staticClass:"line-number"},[s._v("107")]),t("br"),t("span",{staticClass:"line-number"},[s._v("108")]),t("br"),t("span",{staticClass:"line-number"},[s._v("109")]),t("br"),t("span",{staticClass:"line-number"},[s._v("110")]),t("br"),t("span",{staticClass:"line-number"},[s._v("111")]),t("br"),t("span",{staticClass:"line-number"},[s._v("112")]),t("br"),t("span",{staticClass:"line-number"},[s._v("113")]),t("br"),t("span",{staticClass:"line-number"},[s._v("114")]),t("br"),t("span",{staticClass:"line-number"},[s._v("115")]),t("br"),t("span",{staticClass:"line-number"},[s._v("116")]),t("br"),t("span",{staticClass:"line-number"},[s._v("117")]),t("br"),t("span",{staticClass:"line-number"},[s._v("118")]),t("br"),t("span",{staticClass:"line-number"},[s._v("119")]),t("br"),t("span",{staticClass:"line-number"},[s._v("120")]),t("br"),t("span",{staticClass:"line-number"},[s._v("121")]),t("br"),t("span",{staticClass:"line-number"},[s._v("122")]),t("br"),t("span",{staticClass:"line-number"},[s._v("123")]),t("br"),t("span",{staticClass:"line-number"},[s._v("124")]),t("br"),t("span",{staticClass:"line-number"},[s._v("125")]),t("br"),t("span",{staticClass:"line-number"},[s._v("126")]),t("br"),t("span",{staticClass:"line-number"},[s._v("127")]),t("br"),t("span",{staticClass:"line-number"},[s._v("128")]),t("br"),t("span",{staticClass:"line-number"},[s._v("129")]),t("br"),t("span",{staticClass:"line-number"},[s._v("130")]),t("br"),t("span",{staticClass:"line-number"},[s._v("131")]),t("br"),t("span",{staticClass:"line-number"},[s._v("132")]),t("br"),t("span",{staticClass:"line-number"},[s._v("133")]),t("br"),t("span",{staticClass:"line-number"},[s._v("134")]),t("br"),t("span",{staticClass:"line-number"},[s._v("135")]),t("br"),t("span",{staticClass:"line-number"},[s._v("136")]),t("br"),t("span",{staticClass:"line-number"},[s._v("137")]),t("br"),t("span",{staticClass:"line-number"},[s._v("138")]),t("br"),t("span",{staticClass:"line-number"},[s._v("139")]),t("br"),t("span",{staticClass:"line-number"},[s._v("140")]),t("br"),t("span",{staticClass:"line-number"},[s._v("141")]),t("br"),t("span",{staticClass:"line-number"},[s._v("142")]),t("br"),t("span",{staticClass:"line-number"},[s._v("143")]),t("br"),t("span",{staticClass:"line-number"},[s._v("144")]),t("br"),t("span",{staticClass:"line-number"},[s._v("145")]),t("br"),t("span",{staticClass:"line-number"},[s._v("146")]),t("br"),t("span",{staticClass:"line-number"},[s._v("147")]),t("br"),t("span",{staticClass:"line-number"},[s._v("148")]),t("br"),t("span",{staticClass:"line-number"},[s._v("149")]),t("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);